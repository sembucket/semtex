Synopsis
--------

This version of semtex, optbc, is specialised for computation of optimal
inflow perturbations for transient energy growth. This implementation is
restricted to 3-dimensional inflow perturbations with wavenumber greater than
0. The numerics are based on a Lagrangian optimisation scheme outlined in [1]
where more detailed descriptions can be found.

Session File Requirements
--------

Two session files are required by optbc, one for the forward system and one
for the adjoint system. The session files are identical except in the speci-
fication of boundary conditions on the inflow perturbation or "control" bou-
ndary. For both systems the control boundaries require entries in the <GROUPS>
and <BCS> section of the session file as shown below (example entries are for 
the forward system). For the adjoint system the 'C' type boundary conditions
must be changed to either a homogeneous Dirichlet condition or a mixed type 
specified with:

<M>  u = 0 </M>

The mixed type boundary condition requires high resolution in the streamwise
co-ordinate at the inflow and is highly unstable. It is a work in progress and
is not recommended for use at this stage.

For other boundaries, velocity variables and pressure must be set as zero Dir-
ichlet zero conditions on the outflow boundary of the domain while standard 
wall, axis or periodic conditions are applicable to other boundaries.


<GROUPS NUMBER=4>
	1	c	control
	2	w	wall
	3	o	outflow
	4	v	velocity	
</GROUPS>

<BCS NUMBER=4>	
        1	c	4
			<C>	u = 0	</C>	
			<C>	v = 0	</C>	
			<C>	w = 0	</C>	
			<D>	p = 0	</D>	
        2	w	4
			<D>	u = 0	</D>	
			<D>	v = 0	</D>	
			<D>	w = 0	</D>	
			<H>	p = 0	</H>	
        3	o	4
			<D>	u = 0	</D>	
			<D>	v = 0	</D>	
			<D>	w = 0	</D>	
			<D>	p = 0	</D>	
        4	v	4
			<D>	u = 0	</D>	
			<D>	v = 0	</D>	
			<D>	w = 0	</D>	
			<H>	p = 0	</H>	
</BCS>

In the <TOKENS> section, parameters are required to specify the temporal
dependence of the inflow perturbation. The general form of the inflow
perturbation time dependence is a product of two time varying functions:

	     	     	  f(t) = g(t)*h(t)

The parameters required to specify the two terms on the RHS are:
   - controlbc_t_dependency:
		Flag to specify if h(t) = cos(wt) or 1 (time invariant).
		Set equal to 1 for cosine function or 0 for time invariant.
   - frequency_controlbc
		Specifies the frequency of the inflow perturbation if h(t)
		is specified as a cosine function by controlbc_t_dependency.
   - TIMEDECAY
		Flag to specify if g(t) = exp(-3[t-1.60125]^{2}) (Gaussian
		envelope) or 1 (time invariant). Set equal to 1 for Gaussian 
		envelope or 2 for time invariant. To alter the Gaussian envelope
		for other cases at present the field.C file will need to be edited.
   - gradient_method
		Flag to specify gradient optimisation method. Set equal to 0 for 
		steepest descent (default method) or 1 for conjugate gradient? or 
		2? Need to confirm with Xuerui what option 2 does.

Installation & Testing Notes
--------

Compile optbc with a make command in the optbc directory. Note that optbc requires
a remake of semtex's enumerate utility with the mesh.o and feml.o files created
when optbc compiles. The Makefile is configured to copy these files into the
semtex/utility/ directory and recompile enumerate. These object files may cause
problems if they are not removed before attempting to compile other utilities.

Session and base flow files for testing are provided in the "testcase" directory.
The test case can be run with the command "optbc -m 20 stenp5" and results files
for comparison are provided with ".correct" file extensions.

References
--------
[1]  X. Mao, HM Blackburn & SJ Sherwin (In Press), "Optimal inflow boundary condition
     perturbations in steady stenotic flows", J Fluid Mech.

$Id$